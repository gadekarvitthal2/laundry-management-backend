<div class="back-btn-container">
    <button class="back-btn" [routerLink]="['/customer-details']">‚Üê Back</button>
</div>

<h1 class="heading">View Customer Details</h1>

<div>
    <table mat-table [dataSource]="ordersData" class="mat-elevation-z8">

        <!-- Bill Number Column -->
        <ng-container matColumnDef="billNumber">
            <th mat-header-cell *matHeaderCellDef> Bill No </th>
            <td mat-cell *matCellDef="let order"> {{ order.billNumber }} </td>
        </ng-container>

        <!-- Full Name Column -->
        <ng-container matColumnDef="fullName">
            <th mat-header-cell *matHeaderCellDef> Full Name </th>
            <td mat-cell *matCellDef="let order"> {{ order.customerId.fullName }} </td>
        </ng-container>

        <!-- Address Column -->
        <ng-container matColumnDef="address">
            <th mat-header-cell *matHeaderCellDef> Address </th>
            <td mat-cell *matCellDef="let order"> {{ order.customerId.address }} </td>
        </ng-container>

        <!-- Phone Column -->
        <ng-container matColumnDef="phone">
            <th mat-header-cell *matHeaderCellDef> Phone </th>
            <td mat-cell *matCellDef="let order"> {{ order.customerId.phone }} </td>
        </ng-container>

        <!-- Date Column -->
        <ng-container matColumnDef="date">
            <th mat-header-cell *matHeaderCellDef> Date </th>
            <td mat-cell *matCellDef="let order"> {{ order.createdAt | date: 'dd MMMM yyyy, h:mm a' }} </td>
        </ng-container>

        <!-- Delivert Date Column -->
        <ng-container matColumnDef="whatspp_delivered_date">
            <th mat-header-cell *matHeaderCellDef> Delivery Date </th>
            <td mat-cell *matCellDef="let order"> {{ (order.deliveryNotifiedDate | date: 'dd MMMM yyyy, h:mm a') || '-' }} </td>
        </ng-container>

        <!-- Delivered order -->
        <ng-container matColumnDef="Delivered">
            <th mat-header-cell *matHeaderCellDef> Send to Whatsapp </th>
            <!-- <td mat-cell (click)="deliveredMessageUpdateMessage()" *matCellDef="let order" [ngStyle]="{ 'color': order.isDelivered ? 'black' : 'red' }" [attr.disabled]="order.isDelivered"> {{ order.isDelivered ? 'Yes' : 'No' }} </td> -->
            <td mat-cell class="delivered-row-fixed" *matCellDef="let order"
                [ngStyle]="{ 'color': order.isDelivered ? 'black' : 'green' }" [attr.disabled]="order.isDelivered"> 
                <i style="cursor: pointer;" (click)="notify1(order)" class="material-icons">send</i>
                <i style="cursor: pointer;" (click)="copyOrderMessage(order)" class="material-icons">content_copy</i>
            </td>
        </ng-container>

        <!-- Action Column -->
        <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef>Actions</th>
            <td mat-cell *matCellDef="let element">
                <button mat-button (click)="viewOrders(element)"><i class="material-icons">visibility</i></button>
            </td>
        </ng-container>

        <!-- Header and Row Declarations -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" [ngClass]="{ 'delivered-row': row.isDelivered }">
        </tr>
        <!-- No Data Found Row -->
        <tr class="mat-row" *matNoDataRow>
            <td [attr.colspan]="displayedColumns.length" style="text-align:center;padding: 16px 0px;">
                No data found.
            </td>
        </tr>
    </table>
</div>